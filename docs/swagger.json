{
  "openapi": "3.0.1",
  "info": {
    "title": "OpenAPI definition",
    "version": "v0"
  },
  "servers": [
    {
      "url": "http://3.36.110.154:8080",
      "description": "Generated server url"
    }
  ],
  "tags": [
    {
      "name": "Result",
      "description": "결과 생성 API"
    },
    {
      "name": "Trend",
      "description": "트렌드 조회 API"
    },
    {
      "name": "Display",
      "description": "전시용 조회 API"
    },
    {
      "name": "Admin Trend",
      "description": "트렌드 Admin API"
    }
  ],
  "paths": {
    "/api/v1/result": {
      "post": {
        "tags": ["Result"],
        "summary": "결과 생성 및 투표 전송",
        "operationId": "createResult",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateResultRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseCreateResultResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/result/{resultId}/nickname": {
      "post": {
        "tags": ["Result"],
        "summary": "닉네임 최초 설정",
        "description": "이미 닉네임이 설정된 경우 변경 불가",
        "operationId": "updateNickname",
        "parameters": [
          {
            "name": "resultId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateNicknameRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          }
        }
      }
    },
    "/admin/api/v1/trend": {
      "post": {
        "tags": ["Admin Trend"],
        "summary": "트렌드 생성",
        "description": "관리자 전용 트렌드 생성 API",
        "operationId": "createTrend",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateTrendRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseTrendResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/trend/{trendId}/item/{itemId}": {
      "get": {
        "tags": ["Trend"],
        "summary": "트렌드 항목 옵션 카운트 조회",
        "operationId": "getTrendItemOptions",
        "parameters": [
          {
            "name": "trendId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "itemId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseTrendItemOptionsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/result/{resultId}/exists": {
      "get": {
        "tags": ["Result"],
        "summary": "결과 존재 여부 확인",
        "operationId": "checkResultExists",
        "parameters": [
          {
            "name": "resultId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseResultExistsResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/display/trend/{trendId}": {
      "get": {
        "tags": ["Display"],
        "summary": "트렌드 상세 조회",
        "operationId": "getTrendDetail",
        "parameters": [
          {
            "name": "trendId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseDisplayTrendDetailResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/display/result/{resultId}": {
      "get": {
        "tags": ["Display"],
        "summary": "결과 상세 조회",
        "operationId": "getResultDetail",
        "parameters": [
          {
            "name": "resultId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseDisplayResultResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/display/result/{resultId}/invitee": {
      "get": {
        "tags": ["Display"],
        "summary": "초대한 친구 결과 목록 조회",
        "operationId": "getInviteeResults",
        "parameters": [
          {
            "name": "resultId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseInviteeResultResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/display/main": {
      "get": {
        "tags": ["Display"],
        "summary": "메인 화면 트렌드 조회",
        "operationId": "getMainDisplay",
        "parameters": [
          {
            "name": "size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          }
        ],
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseVoid"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "*/*": {
                "schema": {
                  "$ref": "#/components/schemas/BaseResponseDisplayMainResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "BaseResponseVoid": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "응답 코드",
            "example": "S0000"
          },
          "message": {
            "type": "string",
            "description": "응답 메시지",
            "example": "성공"
          },
          "data": {
            "type": "object",
            "description": "응답 데이터"
          }
        },
        "description": "공통 응답 포맷"
      },
      "CreateResultRequest": {
        "type": "object",
        "properties": {
          "trendId": {
            "type": "string"
          },
          "selectedItems": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/SelectedItem"
            }
          },
          "invitationId": {
            "type": "string"
          },
          "nickname": {
            "type": "string"
          }
        }
      },
      "SelectedItem": {
        "type": "object",
        "properties": {
          "itemId": {
            "type": "string"
          },
          "optionId": {
            "type": "string"
          }
        }
      },
      "BaseResponseCreateResultResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "응답 코드",
            "example": "S0000"
          },
          "message": {
            "type": "string",
            "description": "응답 메시지",
            "example": "성공"
          },
          "data": {
            "$ref": "#/components/schemas/CreateResultResponse"
          }
        },
        "description": "공통 응답 포맷"
      },
      "CreateResultResponse": {
        "type": "object",
        "properties": {
          "resultId": {
            "type": "string"
          }
        },
        "description": "응답 데이터"
      },
      "UpdateNicknameRequest": {
        "type": "object",
        "properties": {
          "nickname": {
            "type": "string"
          }
        }
      },
      "CreateTrendRequest": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "트렌드 제목",
            "example": "2025 트렌드"
          },
          "label": {
            "type": "string",
            "description": "트렌드 라벨",
            "example": "TREND2025"
          },
          "imageUrl": {
            "type": "string",
            "description": "대표 이미지 URL"
          },
          "electionIds": {
            "type": "array",
            "description": "연결된 선거/캠페인 ID 목록",
            "items": {
              "type": "string",
              "description": "연결된 선거/캠페인 ID 목록"
            }
          },
          "meta": {
            "$ref": "#/components/schemas/TrendMetaRequest"
          }
        },
        "description": "트렌드 생성 요청"
      },
      "LabelRequest": {
        "type": "object",
        "properties": {
          "label": {
            "type": "string",
            "description": "라벨 값",
            "example": "열정 타입"
          }
        },
        "description": "라벨 입력"
      },
      "ResultTypeRequest": {
        "type": "object",
        "properties": {
          "key": {
            "type": "string",
            "description": "결과 key (optionId 를 / 로 이어붙인 문자열)",
            "example": "110/210/330"
          },
          "label": {
            "type": "string",
            "description": "결과 라벨",
            "example": "열정 타입"
          }
        },
        "description": "결과 타입 입력"
      },
      "TrendMetaRequest": {
        "type": "object",
        "properties": {
          "resultLabel": {
            "type": "string",
            "description": "결과 라벨",
            "example": "당신의 결과"
          },
          "resultType": {
            "type": "array",
            "description": "결과 타입 배열",
            "items": {
              "$ref": "#/components/schemas/ResultTypeRequest"
            }
          },
          "answerType": {
            "type": "array",
            "description": "답변 타입 배열",
            "items": {
              "$ref": "#/components/schemas/LabelRequest"
            }
          }
        },
        "description": "트렌드 메타 정보"
      },
      "BaseResponseTrendResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "응답 코드",
            "example": "S0000"
          },
          "message": {
            "type": "string",
            "description": "응답 메시지",
            "example": "성공"
          },
          "data": {
            "$ref": "#/components/schemas/TrendResponse"
          }
        },
        "description": "공통 응답 포맷"
      },
      "TrendResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "생성된 트렌드 ID",
            "example": "d7d0e79e-2fcb-4a0e-91bb-9c8f2d0a82d5"
          }
        },
        "description": "트렌드 생성 응답"
      },
      "BaseResponseTrendItemOptionsResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "응답 코드",
            "example": "S0000"
          },
          "message": {
            "type": "string",
            "description": "응답 메시지",
            "example": "성공"
          },
          "data": {
            "$ref": "#/components/schemas/TrendItemOptionsResponse"
          }
        },
        "description": "공통 응답 포맷"
      },
      "OptionCount": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "옵션 ID"
          },
          "count": {
            "type": "integer",
            "description": "투표 수",
            "format": "int64"
          }
        },
        "description": "옵션 카운트 정보"
      },
      "TrendItemOptionsResponse": {
        "type": "object",
        "properties": {
          "options": {
            "type": "array",
            "description": "옵션 카운트 목록",
            "items": {
              "$ref": "#/components/schemas/OptionCount"
            }
          }
        },
        "description": "트렌드 옵션 카운트 응답"
      },
      "BaseResponseResultExistsResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "응답 코드",
            "example": "S0000"
          },
          "message": {
            "type": "string",
            "description": "응답 메시지",
            "example": "성공"
          },
          "data": {
            "$ref": "#/components/schemas/ResultExistsResponse"
          }
        },
        "description": "공통 응답 포맷"
      },
      "ResultExistsResponse": {
        "type": "object",
        "properties": {
          "exists": {
            "type": "boolean"
          }
        },
        "description": "응답 데이터"
      },
      "BaseResponseDisplayTrendDetailResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "응답 코드",
            "example": "S0000"
          },
          "message": {
            "type": "string",
            "description": "응답 메시지",
            "example": "성공"
          },
          "data": {
            "$ref": "#/components/schemas/DisplayTrendDetailResponse"
          }
        },
        "description": "공통 응답 포맷"
      },
      "DisplayTrendDetailResponse": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "description": "항목 목록",
            "items": {
              "$ref": "#/components/schemas/DisplayTrendItemResponse"
            }
          }
        },
        "description": "트렌드 상세 응답"
      },
      "DisplayTrendItemResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "항목 ID"
          },
          "title": {
            "type": "string",
            "description": "항목 제목"
          },
          "label": {
            "type": "string",
            "description": "트렌드 라벨"
          },
          "options": {
            "type": "array",
            "description": "옵션 목록",
            "items": {
              "$ref": "#/components/schemas/DisplayTrendOptionResponse"
            }
          }
        },
        "description": "트렌드 상세 항목"
      },
      "DisplayTrendOptionResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "옵션 ID"
          },
          "title": {
            "type": "string",
            "description": "옵션 제목"
          },
          "imageUrl": {
            "type": "string",
            "description": "옵션 이미지 URL"
          }
        },
        "description": "선거 옵션 정보"
      },
      "BaseResponseDisplayResultResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "응답 코드",
            "example": "S0000"
          },
          "message": {
            "type": "string",
            "description": "응답 메시지",
            "example": "성공"
          },
          "data": {
            "$ref": "#/components/schemas/DisplayResultResponse"
          }
        },
        "description": "공통 응답 포맷"
      },
      "DisplayResultResponse": {
        "type": "object",
        "properties": {
          "resultLabel": {
            "type": "string",
            "description": "결과 라벨"
          },
          "resultType": {
            "type": "string",
            "description": "매핑된 결과 타입 라벨"
          },
          "trend": {
            "$ref": "#/components/schemas/TrendResult"
          },
          "selectedOptions": {
            "type": "array",
            "description": "선택한 옵션 목록",
            "items": {
              "type": "string",
              "description": "선택한 옵션 목록"
            }
          },
          "inviterSelectedOptions": {
            "type": "array",
            "description": "초대한 사용자의 선택 옵션 목록",
            "items": {
              "type": "string",
              "description": "초대한 사용자의 선택 옵션 목록"
            }
          },
          "nickname": {
            "type": "string",
            "description": "응답한 닉네임"
          },
          "inviterNickname": {
            "type": "string",
            "description": "초대한 사람 닉네임"
          },
          "compareType": {
            "type": "string",
            "description": "비교 타입"
          },
          "matchCount": {
            "type": "integer",
            "description": "일치한 선택 수",
            "format": "int32"
          },
          "totalCount": {
            "type": "integer",
            "description": "총 선택 수",
            "format": "int32"
          }
        },
        "description": "결과 상세 조회 응답"
      },
      "Option": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          }
        }
      },
      "TrendResult": {
        "type": "object",
        "properties": {
          "items": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TrendResultItem"
            }
          }
        },
        "description": "트렌드/아이템 정보"
      },
      "TrendResultItem": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string"
          },
          "options": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Option"
            }
          }
        }
      },
      "BaseResponseInviteeResultResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "응답 코드",
            "example": "S0000"
          },
          "message": {
            "type": "string",
            "description": "응답 메시지",
            "example": "성공"
          },
          "data": {
            "$ref": "#/components/schemas/InviteeResultResponse"
          }
        },
        "description": "공통 응답 포맷"
      },
      "InviteeResultResponse": {
        "type": "object",
        "properties": {
          "results": {
            "type": "array",
            "description": "초대 수락 결과 목록",
            "items": {
              "$ref": "#/components/schemas/Item"
            }
          }
        },
        "description": "초대 받은 친구 결과 목록 응답"
      },
      "Item": {
        "type": "object",
        "properties": {
          "nickname": {
            "type": "string"
          },
          "compareType": {
            "type": "string"
          },
          "createdAt": {
            "type": "string",
            "format": "date"
          }
        },
        "description": "초대 받은 친구 결과 항목"
      },
      "BaseResponseDisplayMainResponse": {
        "type": "object",
        "properties": {
          "code": {
            "type": "string",
            "description": "응답 코드",
            "example": "S0000"
          },
          "message": {
            "type": "string",
            "description": "응답 메시지",
            "example": "성공"
          },
          "data": {
            "$ref": "#/components/schemas/DisplayMainResponse"
          }
        },
        "description": "공통 응답 포맷"
      },
      "DisplayMainResponse": {
        "type": "object",
        "properties": {
          "trends": {
            "type": "array",
            "description": "트렌드 목록",
            "items": {
              "$ref": "#/components/schemas/DisplayTrendResponse"
            }
          }
        },
        "description": "메인 화면 응답"
      },
      "DisplayTrendResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "트렌드 ID"
          },
          "title": {
            "type": "string",
            "description": "트렌드 제목"
          },
          "label": {
            "type": "string",
            "description": "라벨"
          },
          "imageUrl": {
            "type": "string",
            "description": "이미지 URL"
          },
          "participantsCount": {
            "type": "integer",
            "description": "참여자 수",
            "format": "int64"
          }
        },
        "description": "메인 노출용 트렌드 정보"
      }
    }
  }
}
